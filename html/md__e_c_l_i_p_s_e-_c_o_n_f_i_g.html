<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WRIMS3: Building WRIMS-ENGINE from Eclipse IDE</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WRIMS3
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__e_c_l_i_p_s_e-_c_o_n_f_i_g.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Building WRIMS-ENGINE from Eclipse IDE </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md33"></a></p>
<p>This document covers the configuration for building the WRIMS-ENGINE project from the Eclipse IDE using Gradle.</p>
<p>NOTE: The current WRIMS-ENGINE build is built on Java 21. The recommended version of Eclipse uses Java 21 by default. Setting the JAVA_HOME environment variable to the JDK 21 installation directory is recommended, but not required to build the project from Eclipse.</p>
<p>If you need to keep you JAVA_HOME set to java 1.8 for other projects you can manually run the gradle build by explicitly calling the java executable from the command line as described below.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md34"></a>
WRIMS-ENGINE Developer Build Setup - Using Gradle:</h1>
<p>PREREQUISITES:</p><ul>
<li>Git<ul>
<li><a href="https://github.com/git-guides/install-git">https://github.com/git-guides/install-git</a></li>
</ul>
</li>
<li>&lt;USER-DIR&gt;\.gradle\gradle.properties configured with token for access to the CentralValleyModeling GitHub repository<ul>
<li>Example: C:\Users\&lt;username&gt;\.gradle\gradle.properties</li>
<li>NOTE: If you have to create the gradle.properties file, make sure it's not a "gradle.properties.txt" file. <div class="fragment"><div class="line">...</div>
<div class="line">cvmUserId=&lt;githubUserId&gt;</div>
<div class="line">cvmPassword=&lt;githubPersonalAccessToken&gt;</div>
<div class="line">...</div>
</div><!-- fragment --> The cvmPassword is preferably set to a GitHub personal access token that has been granted access to the CentralValleyModeling GitHub repository with public_repo access and read:packages enabled.<br  />
</li>
</ul>
</li>
</ul>
<p>You can generate a personal access token here: <a href="https://github.com/settings/tokens/new">https://github.com/settings/tokens/new</a></p>
<ul>
<li>Java JDK 21 installed (<a href="https://adoptium.net/en-GB/temurin/releases/?version=21">https://adoptium.net/en-GB/temurin/releases/?version=21</a>)<ul>
<li>NOTE: Any flavor of JDK 21 should work if you already have one installed.</li>
</ul>
</li>
<li>IDE Eclipse<ul>
<li>Latest Eclipse RCP download site:</li>
<li><a href="https://www.eclipse.org/downloads/packages/release/2024-12/r/eclipse-ide-rcp-and-rap-developers">https://www.eclipse.org/downloads/packages/release/2024-12/r/eclipse-ide-rcp-and-rap-developers</a></li>
</ul>
</li>
</ul>
<dl class="section warning"><dt>Warning</dt><dd>If you don't set the cvmUserId and cvmPassword in your gradle.properties file, you will get errors when you load the project into Eclipse. If that happens, you'll need to set the missing parameters in your gradle.properties file. Then remove and re-import the project to eclipse to clear the errors and load correctly.<br  />
 Make sure your gradle.properties file is in the correct location under your user directory and not a .txt file.<br  />
 <br  />
 Never add your github username/token to any properties within project source code or it risks being committed &amp; exposed to the public.</dd></dl>
<h2 class="doxsection"><a class="anchor" id="autotoc_md35"></a>
1. Pull Source from GitHub &amp; build the project</h2>
<ul>
<li>Clone the repository to your local machine.<ul>
<li>Repository Clone URL: <a href="https://github.com/CentralValleyModeling/wrims-engine.git">https://github.com/CentralValleyModeling/wrims-engine.git</a></li>
</ul>
</li>
<li>CD into the wrims-engine directory.</li>
<li>Build the project with gradle from the command line</li>
</ul>
<p>The following commands will clone the repository, and build the project from a command prompt. Alternatively, you can use your preferred git repo manager tool to clone the wrims repo and checkout the wrims-devops branch.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md36"></a>
Example using Command Prompt or PowerShell on Windows</h3>
<div class="fragment"><div class="line">git clone https://github.com/CentralValleyModeling/wrims-engine.git</div>
<div class="line">cd wrims-engine</div>
<div class="line">.\gradlew build</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md37"></a>
Common Build Errors</h3>
<p>If you don't have the JAVA_HOME environment variable set to a JDK 21 installation directory, you may get errors like this:</p>
<div class="fragment"><div class="line">C:\GitHub\CVM2\wrims-engine&gt;gradlew build</div>
<div class="line"> </div>
<div class="line">ERROR: JAVA_HOME is not set and no &#39;java&#39; command could be found in your PATH.</div>
<div class="line"> </div>
<div class="line">Please set the JAVA_HOME variable in your environment to match the</div>
<div class="line">location of your Java installation.</div>
</div><!-- fragment --><p> Or if you have an older version of Java installed under you JAVA_HOME environment variable, you would see a similar java version error. In this case you can either set the JAVA_HOME environment variable to the JDK 21 installation directory, or you can directly call the java executable from the command line like this:</p>
<p>/path/to/your/jdk/bin/java -jar gradle/wrapper/gradle-wrapper.jar build</p>
<div class="fragment"><div class="line"> example</div>
<div class="line">C:\GitHub\CVM2\wrims-engine&gt;C:\java\jdk-21.0.8.9-hotspot\bin\java -jar gradle/wrapper/gradle-wrapper.jar build</div>
<div class="line">Starting a Gradle Daemon, 5 incompatible Daemons could not be reused, use --status for details</div>
<div class="line"> </div>
<div class="line">BUILD SUCCESSFUL in 29s</div>
<div class="line">15 actionable tasks: 15 up-to-date</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md38"></a>
HANDLING BUILD ERRORS FROM CMD or POWERSHELL:</h3>
<p>If you have a space in your java path you will need to wrap it in quotes like this: </p><div class="fragment"><div class="line">&quot;C:\Program Files\Java\jdk-21\bin\java&quot; -jar gradle/wrapper/gradle-wrapper.jar build</div>
</div><!-- fragment --><p>If you encounter an error like: "invalid option: --release", try including the -Dorg.gradle.java.home option in your build command before for the -jar like this:</p>
<div class="fragment"><div class="line">C:\java\jdk-21\bin\java -Dorg.gradle.java.home=C:\java\jdk-21 -jar gradle/wrapper/gradle-wrapper.jar build</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md39"></a>
2. Open Eclipse with a new/clean workspace</h2>
<p>Once you have built the wrims-engine project with Gradle from the command line, launch Eclipse.</p>
<p>Create a new workspace to import the project.</p>
<p>Using Eclipse 2024-12, the default Java version is 21, so you should not need to change the Java version in Eclipse.</p>
<p>NOTE: If you have an existing workspace, you can import the wrims-engine project into that workspace, but it is recommended to use a new workspace to avoid any conflicts with existing projects. You will also need to make sure the workspace gradle and project settings are set to use the JDK 21 version you have installed.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md40"></a>
3. Import the wrims-engine project into Eclipse</h2>
<p>Close the "Welcome" window if it appears. Click File-&gt; Import... and select Import as an Existing Gradle Project</p>
<p>Select the wrims-engine project directory and click next.</p>
<p>Complete the import with default settings.</p>
<p>Click Finish to import.</p>
<p>Once the build is complete, you should see 0 errors in the Problems window. Gradle Tasks &amp; Gradle Executions windows default to the bottom of the Eclipse window.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md41"></a>
4. Build wrims-engine with Gradle task</h2>
<p>From the "Gradle Tasks" window, run the "build" task on the root project. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
